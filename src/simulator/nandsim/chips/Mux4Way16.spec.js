import { Mux4Way16 } from "./index.js";
import { sim } from "../Gate.js";

describe("Mux4Way16", () => {
  // Define connections
  let mux = new Mux4Way16();

  // Define Inputs
  mux.in.name("input").input();
  mux.sel.name("sel").input();

  // Define Outputs
  mux.out.name("out").output();

  test.each`
    input                                                                               | sel     | out
    ${["0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000"]} | ${"00"} | ${"0000000000000000"}
    ${["0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000"]} | ${"01"} | ${"0000000000000000"}
    ${["0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000"]} | ${"10"} | ${"0000000000000000"}
    ${["0000000000000000", "0000000000000000", "0000000000000000", "0000000000000000"]} | ${"11"} | ${"0000000000000000"}
    ${["0001001000110100", "1001100001110110", "1010101010101010", "0101010101010101"]} | ${"00"} | ${"0101010101010101"}
    ${["0001001000110100", "1001100001110110", "1010101010101010", "0101010101010101"]} | ${"01"} | ${"1010101010101010"}
    ${["0001001000110100", "1001100001110110", "1010101010101010", "0101010101010101"]} | ${"10"} | ${"1001100001110110"}
    ${["0001001000110100", "1001100001110110", "1010101010101010", "0101010101010101"]} | ${"11"} | ${"0001001000110100"}
  `("[$input][$sel] == $out", ({ input, sel, out }) => {
    sim.setPins({ input, sel });
    expect(sim.readPins("input", "sel")).toEqual({ input, sel });
    sim.evalOutputs();
    expect(sim.readPins("out")).toEqual({ out });
  });
});
